<?xml version="1.0" encoding="UTF-8"?>
<BatchCalcJobDefinition xmlns="http://soap.sforce.com/2006/04/metadata">
    <dataSpaceApiName>default</dataSpaceApiName>
    <datasources>
        <fields>
            <alias>Membership_Number</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Membership_Number</name>
        </fields>
        <fields>
            <alias>Points</alias>
            <dataType>Numeric</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Points</name>
        </fields>
        <fields>
            <alias>VoucherDefinitionName</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>VoucherDefinitionName</name>
        </fields>
        <label>CSVupload</label>
        <name>CSVupload</name>
        <sourceName>LoyaltyMemberCurrency_PointsOnlyDPE</sourceName>
        <type>Analytics</type>
    </datasources>
    <datasources>
        <fields>
            <alias>Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <fields>
            <alias>LoyaltyMemberId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>LoyaltyMemberId</name>
        </fields>
        <fields>
            <alias>PointsBalance</alias>
            <dataType>Numeric</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>PointsBalance</name>
        </fields>
        <fields>
            <alias>TotalPointsAccrued</alias>
            <dataType>Numeric</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>TotalPointsAccrued</name>
        </fields>
        <fields>
            <alias>TotalPointsRedeemed</alias>
            <dataType>Numeric</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>TotalPointsRedeemed</name>
        </fields>
        <label>LoyaltyMemberCurrency</label>
        <name>LoyaltyMemberCurrency</name>
        <sourceName>LoyaltyMemberCurrency</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>MemberId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <fields>
            <alias>MembershipNumber</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>MembershipNumber</name>
        </fields>
        <fields>
            <alias>MemberStatus</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>MemberStatus</name>
        </fields>
        <fields>
            <alias>ProgramId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>ProgramId</name>
        </fields>
        <label>LoyaltyProgramMember</label>
        <name>LoyaltyProgramMember</name>
        <sourceName>LoyaltyProgramMember</sourceName>
        <type>StandardObject</type>
    </datasources>
    <executionPlatformType>CRMA</executionPlatformType>
    <isTemplate>false</isTemplate>
    <joins>
        <fields>
            <alias>LoyaltyMemberId</alias>
            <sourceFieldName>LoyaltyMemberId</sourceFieldName>
            <sourceName>LoyaltyMemberCurrency</sourceName>
        </fields>
        <fields>
            <alias>MemberCurrencyId</alias>
            <sourceFieldName>Id</sourceFieldName>
            <sourceName>LoyaltyMemberCurrency</sourceName>
        </fields>
        <fields>
            <alias>MemberId</alias>
            <sourceFieldName>MemberId</sourceFieldName>
            <sourceName>ProgramMemberJoin</sourceName>
        </fields>
        <fields>
            <alias>MembershipNumber</alias>
            <sourceFieldName>MembershipNumber</sourceFieldName>
            <sourceName>ProgramMemberJoin</sourceName>
        </fields>
        <fields>
            <alias>Points</alias>
            <sourceFieldName>CeilingPoints</sourceFieldName>
            <sourceName>ProgramMemberJoin</sourceName>
        </fields>
        <fields>
            <alias>PointsBalance</alias>
            <sourceFieldName>PointsBalance</sourceFieldName>
            <sourceName>LoyaltyMemberCurrency</sourceName>
        </fields>
        <fields>
            <alias>ProgramId</alias>
            <sourceFieldName>ProgramId</sourceFieldName>
            <sourceName>ProgramMemberJoin</sourceName>
        </fields>
        <fields>
            <alias>TotalPointsAccrued</alias>
            <sourceFieldName>TotalPointsAccrued</sourceFieldName>
            <sourceName>LoyaltyMemberCurrency</sourceName>
        </fields>
        <fields>
            <alias>TotalPointsRedeemed</alias>
            <sourceFieldName>TotalPointsRedeemed</sourceFieldName>
            <sourceName>LoyaltyMemberCurrency</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>MemberId</primarySourceFieldName>
            <secondarySourceFieldName>LoyaltyMemberId</secondarySourceFieldName>
        </joinKeys>
        <label>JoinMemberCurrency</label>
        <name>JoinMemberCurrency</name>
        <primarySourceName>ProgramMemberJoin</primarySourceName>
        <secondarySourceName>LoyaltyMemberCurrency</secondarySourceName>
        <type>Inner</type>
    </joins>
    <joins>
        <fields>
            <alias>CeilingPoints</alias>
            <sourceFieldName>CeilingPoints</sourceFieldName>
            <sourceName>CelingPoints</sourceName>
        </fields>
        <fields>
            <alias>MemberId</alias>
            <sourceFieldName>MemberId</sourceFieldName>
            <sourceName>LoyaltyProgramMember</sourceName>
        </fields>
        <fields>
            <alias>MembershipNumber</alias>
            <sourceFieldName>MembershipNumber</sourceFieldName>
            <sourceName>LoyaltyProgramMember</sourceName>
        </fields>
        <fields>
            <alias>Membership_Number</alias>
            <sourceFieldName>Membership_Number</sourceFieldName>
            <sourceName>CelingPoints</sourceName>
        </fields>
        <fields>
            <alias>MemberStatus</alias>
            <sourceFieldName>MemberStatus</sourceFieldName>
            <sourceName>LoyaltyProgramMember</sourceName>
        </fields>
        <fields>
            <alias>ProgramId</alias>
            <sourceFieldName>ProgramId</sourceFieldName>
            <sourceName>LoyaltyProgramMember</sourceName>
        </fields>
        <fields>
            <alias>VoucherDefinitionName</alias>
            <sourceFieldName>VoucherDefinitionName</sourceFieldName>
            <sourceName>CelingPoints</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>Membership_Number</primarySourceFieldName>
            <secondarySourceFieldName>MembershipNumber</secondarySourceFieldName>
        </joinKeys>
        <label>ProgramMemberJoin</label>
        <name>ProgramMemberJoin</name>
        <primarySourceName>CelingPoints</primarySourceName>
        <secondarySourceName>LoyaltyProgramMember</secondarySourceName>
        <type>Inner</type>
    </joins>
    <label>Bulk Insert Member Points for Migration</label>
    <processType>Loyalty</processType>
    <status>Active</status>
    <transforms>
        <expressionFields>
            <alias>CeilingPoints</alias>
            <dataType>Numeric</dataType>
            <decimalPlaces>0</decimalPlaces>
            <expression>CEILING({Points} )</expression>
            <length>18</length>
        </expressionFields>
        <label>CelingPoints</label>
        <name>CelingPoints</name>
        <sourceName>CSVupload</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <transforms>
        <expressionFields>
            <alias>ZEROPointsRedeemed</alias>
            <dataType>Numeric</dataType>
            <decimalPlaces>0</decimalPlaces>
            <expression>0</expression>
            <length>18</length>
        </expressionFields>
        <label>Transform</label>
        <name>Transform</name>
        <sourceName>JoinMemberCurrency</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <writebacks>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>MemberCurrencyId</sourceFieldName>
            <targetFieldName>Id</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Points</sourceFieldName>
            <targetFieldName>TotalPointsAccrued</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>ZEROPointsRedeemed</sourceFieldName>
            <targetFieldName>TotalPointsRedeemed</targetFieldName>
        </fields>
        <isChangedRow>false</isChangedRow>
        <label>Update Member Currency Record</label>
        <name>Update_Member_Currency_Record</name>
        <operationType>Update</operationType>
        <sourceName>Transform</sourceName>
        <storageType>sObject</storageType>
        <targetObjectName>LoyaltyMemberCurrency</targetObjectName>
        <writebackSequence>1</writebackSequence>
        <writebackUser>005Hp00000hfFcWIAU</writebackUser>
    </writebacks>
</BatchCalcJobDefinition>
